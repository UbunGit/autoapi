{"remainingRequest":"/Users/admin/Documents/GitHub/autoapi/node_modules/babel-loader/lib/index.js!/Users/admin/Documents/GitHub/autoapi/node_modules/eslint-loader/index.js??ref--13-0!/Users/admin/Documents/GitHub/autoapi/src/autoapi/lib/core/app-configuration/config-loader.js","dependencies":[{"path":"/Users/admin/Documents/GitHub/autoapi/src/autoapi/lib/core/app-configuration/config-loader.js","mtime":1605244893782},{"path":"/Users/admin/Documents/GitHub/autoapi/node_modules/cache-loader/dist/cjs.js","mtime":1603071031830},{"path":"/Users/admin/Documents/GitHub/autoapi/node_modules/babel-loader/lib/index.js","mtime":1605088291697},{"path":"/Users/admin/Documents/GitHub/autoapi/node_modules/eslint-loader/index.js","mtime":1603071032704}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:J3VzZSBzdHJpY3QnOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmNvbmNhdCIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbHRlciIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnJlZHVjZSIpOwoKcmVxdWlyZSgiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiKTsKCnZhciBwYXRoID0gcmVxdWlyZSgncGF0aCcpOwoKdmFyIGZzID0gcmVxdWlyZSgnZnMnKTsgLy8gY29uc3QgeyB0ZW1wbGF0ZUNvbmZpZ3VyYXRpb24gfSA9IHJlcXVpcmUoJ3N0cmFwaS11dGlscycpOwoKCnZhciBlbnYgPSByZXF1aXJlKCcuL2Vudi1oZWxwZXInKTsKCm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGRpcikgewogIGlmICghZnMuZXhpc3RzU3luYyhkaXIpKSByZXR1cm4ge307CiAgcmV0dXJuIGZzLnJlYWRkaXJTeW5jKGRpciwgewogICAgd2l0aEZpbGVUeXBlczogdHJ1ZQogIH0pLmZpbHRlcihmdW5jdGlvbiAoZmlsZSkgewogICAgcmV0dXJuIGZpbGUuaXNGaWxlKCk7CiAgfSkucmVkdWNlKGZ1bmN0aW9uIChhY2MsIGZpbGUpIHsKICAgIHZhciBrZXkgPSBwYXRoLmJhc2VuYW1lKGZpbGUubmFtZSwgcGF0aC5leHRuYW1lKGZpbGUubmFtZSkpOwogICAgYWNjW2tleV0gPSBsb2FkRmlsZShwYXRoLnJlc29sdmUoZGlyLCBmaWxlLm5hbWUpKTsKICAgIHJldHVybiBhY2M7CiAgfSwge30pOwp9OwoKdmFyIGxvYWRGaWxlID0gZnVuY3Rpb24gbG9hZEZpbGUoZmlsZSkgewogIHZhciBleHQgPSBwYXRoLmV4dG5hbWUoZmlsZSk7CgogIHN3aXRjaCAoZXh0KSB7CiAgICBjYXNlICcuanMnOgogICAgICByZXR1cm4gbG9hZEpzRmlsZShmaWxlKTsKCiAgICBjYXNlICcuanNvbic6CiAgICAgIHJldHVybiB7fTsKICAgIC8vIHJldHVybiBsb2FkSlNPTkZpbGUoZmlsZSk7CgogICAgZGVmYXVsdDoKICAgICAgcmV0dXJuIHt9OwogIH0KfTsKCnZhciBsb2FkSnNGaWxlID0gZnVuY3Rpb24gbG9hZEpzRmlsZShmaWxlKSB7CiAgdHJ5IHsKICAgIHZhciBqc01vZHVsZSA9IHJlcXVpcmUoZmlsZSk7IC8vIGNhbGwgaWYgZnVuY3Rpb24KCgogICAgaWYgKHR5cGVvZiBqc01vZHVsZSA9PT0gJ2Z1bmN0aW9uJykgewogICAgICByZXR1cm4ganNNb2R1bGUoewogICAgICAgIGVudjogZW52CiAgICAgIH0pOwogICAgfQoKICAgIHJldHVybiBqc01vZHVsZTsKICB9IGNhdGNoIChlcnJvcikgewogICAgdGhyb3cgbmV3IEVycm9yKCJDb3VsZCBub3QgbG9hZCBqcyBjb25maWcgZmlsZSAiLmNvbmNhdChmaWxlLCAiOiAiKS5jb25jYXQoZXJyb3IubWVzc2FnZSkpOwogIH0KfTsgLy8gY29uc3QgbG9hZEpTT05GaWxlID0gZmlsZSA9PiB7Ci8vICAgdHJ5IHsKLy8gICAgIHJldHVybiB0ZW1wbGF0ZUNvbmZpZ3VyYXRpb24oSlNPTi5wYXJzZShmcy5yZWFkRmlsZVN5bmMoZmlsZSkpKTsKLy8gICB9IGNhdGNoIChlcnJvcikgewovLyAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgbG9hZCBqc29uIGNvbmZpZyBmaWxlICR7ZmlsZX06ICR7ZXJyb3IubWVzc2FnZX1gKTsKLy8gICB9Ci8vIH07"},{"version":3,"sources":["/Users/admin/Documents/GitHub/autoapi/src/autoapi/lib/core/app-configuration/config-loader.js"],"names":["path","require","fs","env","module","exports","dir","existsSync","readdirSync","withFileTypes","filter","file","isFile","reduce","acc","key","basename","name","extname","loadFile","resolve","ext","loadJsFile","jsModule","error","Error","message"],"mappings":"AAAA;;;;;;;;;;AAEA,IAAMA,IAAI,GAAGC,OAAO,CAAC,MAAD,CAApB;;AACA,IAAMC,EAAE,GAAGD,OAAO,CAAC,IAAD,CAAlB,C,CACA;;;AAEA,IAAME,GAAG,GAAGF,OAAO,CAAC,cAAD,CAAnB;;AAEAG,MAAM,CAACC,OAAP,GAAiB,UAAAC,GAAG,EAAI;AACtB,MAAI,CAACJ,EAAE,CAACK,UAAH,CAAcD,GAAd,CAAL,EAAyB,OAAO,EAAP;AAEzB,SAAOJ,EAAE,CACNM,WADI,CACQF,GADR,EACa;AAAEG,IAAAA,aAAa,EAAE;AAAjB,GADb,EAEJC,MAFI,CAEG,UAAAC,IAAI;AAAA,WAAIA,IAAI,CAACC,MAAL,EAAJ;AAAA,GAFP,EAGJC,MAHI,CAGG,UAACC,GAAD,EAAMH,IAAN,EAAe;AACrB,QAAMI,GAAG,GAAGf,IAAI,CAACgB,QAAL,CAAcL,IAAI,CAACM,IAAnB,EAAyBjB,IAAI,CAACkB,OAAL,CAAaP,IAAI,CAACM,IAAlB,CAAzB,CAAZ;AAEAH,IAAAA,GAAG,CAACC,GAAD,CAAH,GAAWI,QAAQ,CAACnB,IAAI,CAACoB,OAAL,CAAad,GAAb,EAAkBK,IAAI,CAACM,IAAvB,CAAD,CAAnB;AAEA,WAAOH,GAAP;AACD,GATI,EASF,EATE,CAAP;AAUD,CAbD;;AAeA,IAAMK,QAAQ,GAAG,SAAXA,QAAW,CAAAR,IAAI,EAAI;AACvB,MAAMU,GAAG,GAAGrB,IAAI,CAACkB,OAAL,CAAaP,IAAb,CAAZ;;AAEA,UAAQU,GAAR;AACE,SAAK,KAAL;AACE,aAAOC,UAAU,CAACX,IAAD,CAAjB;;AACF,SAAK,OAAL;AACE,aAAO,EAAP;AACA;;AACF;AACE,aAAO,EAAP;AAPJ;AASD,CAZD;;AAcA,IAAMW,UAAU,GAAG,SAAbA,UAAa,CAAAX,IAAI,EAAI;AACzB,MAAI;AACF,QAAMY,QAAQ,GAAGtB,OAAO,CAACU,IAAD,CAAxB,CADE,CAGF;;;AACA,QAAI,OAAOY,QAAP,KAAoB,UAAxB,EAAoC;AAClC,aAAOA,QAAQ,CAAC;AAAEpB,QAAAA,GAAG,EAAHA;AAAF,OAAD,CAAf;AACD;;AAED,WAAOoB,QAAP;AACD,GATD,CASE,OAAOC,KAAP,EAAc;AACd,UAAM,IAAIC,KAAJ,yCAA2Cd,IAA3C,eAAoDa,KAAK,CAACE,OAA1D,EAAN;AACD;AACF,CAbD,C,CAeA;AAEA;AACA;AACA;AACA;AACA;AACA","sourcesContent":["'use strict';\n\nconst path = require('path');\nconst fs = require('fs');\n// const { templateConfiguration } = require('strapi-utils');\n\nconst env = require('./env-helper');\n\nmodule.exports = dir => {\n  if (!fs.existsSync(dir)) return {};\n\n  return fs\n    .readdirSync(dir, { withFileTypes: true })\n    .filter(file => file.isFile())\n    .reduce((acc, file) => {\n      const key = path.basename(file.name, path.extname(file.name));\n\n      acc[key] = loadFile(path.resolve(dir, file.name));\n\n      return acc;\n    }, {});\n};\n\nconst loadFile = file => {\n  const ext = path.extname(file);\n\n  switch (ext) {\n    case '.js':\n      return loadJsFile(file);\n    case '.json':\n      return {};\n      // return loadJSONFile(file);\n    default:\n      return {};\n  }\n};\n\nconst loadJsFile = file => {\n  try {\n    const jsModule = require(file);\n\n    // call if function\n    if (typeof jsModule === 'function') {\n      return jsModule({ env });\n    }\n\n    return jsModule;\n  } catch (error) {\n    throw new Error(`Could not load js config file ${file}: ${error.message}`);\n  }\n};\n\n// const loadJSONFile = file => {\n\n//   try {\n//     return templateConfiguration(JSON.parse(fs.readFileSync(file)));\n//   } catch (error) {\n//     throw new Error(`Could not load json config file ${file}: ${error.message}`);\n//   }\n// };\n"]}]}